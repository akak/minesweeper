(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(4),r=a.n(l),s=(a(10),a(1));var o=function(e){function t(t){var n=Math.min(a.width,20),i=t%n,l=(t-i)/n;return e.board.startingCell+i+l*e.board.details.width}var a=e.board.details,n=e.board.viewableCells(e.board.startingCell).map((function(e,t){var a="cell neighbours".concat(e.value.neighbours);return e.isFlagged&&(a+=" flag"),e.isRevealed&&(a+=" revealed"),e.value.isMine&&(a+=" mine"),i.a.createElement("div",{className:a,"data-index":t,key:e.index})})),l=Math.min(a.width,20),r=Math.min(a.height,20),s={gridTemplateColumns:"repeat(".concat(l,", 30px)"),gridTemplateRows:"repeat(".concat(r,", 30px)")},o="board-grid status-".concat(e.board.status);return e.superhero&&(o+=" superhero"),i.a.createElement("div",{className:o,onClick:function(a){a.preventDefault(),a.stopPropagation();var n=a.shiftKey?"cMenu":"click",i=parseInt(a.target.dataset.index);isNaN(i)||e.onChange(n,t(i))},onContextMenu:function(a){a.preventDefault(),a.stopPropagation();var n=parseInt(a.target.dataset.index);isNaN(n)||e.onChange("cMenu",t(n))},style:s},n)};var u=function(e){var t=e.board,a=t.details,l=t.notRevealed===t.details.width*t.details.height||"game"!==t.status,r=Object(n.useState)(a.width),o=Object(s.a)(r,2),u=o[0],c=o[1],h=Object(n.useState)(a.height),d=Object(s.a)(h,2),g=d[0],v=d[1],m=Object(n.useState)(a.mines),f=Object(s.a)(m,2),p=f[0],w=f[1];return i.a.createElement("div",{className:"details"},i.a.createElement("form",{onSubmit:function(t){t.preventDefault(),(l||window.confirm("The game will stop. Are you sure?"))&&e.onChange(u,g,p)}},i.a.createElement("label",null,"width:",i.a.createElement("input",{type:"number",value:u,onChange:function(e){c(e.target.value)}})),i.a.createElement("label",null,"height:",i.a.createElement("input",{type:"number",value:g,onChange:function(e){v(e.target.value)}})),i.a.createElement("label",null,"mines:",i.a.createElement("input",{type:"number",value:p,onChange:function(e){w(e.target.value)}})),i.a.createElement("input",{type:"submit",value:"New"})),i.a.createElement("div",null,i.a.createElement("div",null,"Left flags: ",t.minesLeft),i.a.createElement("div",null,"status: ",t.status),i.a.createElement("div",{className:"cloak"},"not revealed: ",t.notRevealed,"starting: ",t.startingCell)))};var c=function(e){var t=e.board;if(t.details.width<=20&&t.details.height<=20)return i.a.createElement(i.a.Fragment,null);var a=t.details.width/t.details.height,n=Math.min(t.details.width,20),l=Math.min(t.details.height,20),r=t.startingCell%t.details.width,s=(t.startingCell-r)/t.details.width,o={height:t.details.width>t.details.height?300/a:300,width:t.details.width<t.details.height?300*a:300},u={width:"".concat(n/t.details.width*o.width,"px"),height:"".concat(l/t.details.height*o.height,"px"),marginTop:"".concat(s/t.details.height*o.height,"px"),marginLeft:"".concat(r/t.details.width*o.width,"px")};function c(a){if(a.preventDefault(),a.stopPropagation(),1&a.buttons){var i=a.pageX-a.currentTarget.offsetLeft,r=a.pageY-a.currentTarget.offsetTop;i=parseInt(i/o.width*t.details.width),r=parseInt(r/o.height*t.details.height),(i-=parseInt(n/2))<0&&(i=0),(r-=parseInt(l/2))<0&&(r=0),i+n>t.details.width&&(i=t.details.width-n),r+l>t.details.height&&(r=t.details.height-l),e.onChange(i+r*t.details.width)}}return i.a.createElement("div",{className:"layout-area"},i.a.createElement("h3",null,"Layout Map"),i.a.createElement("div",{className:"layout-map",style:o,onClick:c,onMouseMove:c},i.a.createElement("div",{className:"viewable",style:u})))},h=a(2);function d(e){return-e.details.width}function g(e){return e.details.width}function v(e,t){return t>=g(e)}function m(e,t){return t<e.cells.length+d(e)}function f(e,t){return t%g(e)>0}function p(e,t){return t%g(e)!==g(e)-1}function w(e,t){var a=[];return v(e,t)&&f(e,t)&&a.push(t+function(e){return d(e)+-1}(e)),v(e,t)&&a.push(t+d(e)),v(e,t)&&p(e,t)&&a.push(t+function(e){return d(e)+1}(e)),p(e,t)&&a.push(t+1),m(e,t)&&p(e,t)&&a.push(t+function(e){return g(e)+1}(e)),m(e,t)&&a.push(t+g(e)),m(e,t)&&f(e,t)&&a.push(t+function(e){return g(e)+-1}(e)),f(e,t)&&a.push(t+-1),a}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cells:[]};t.details={width:e.width,height:e.height,mines:e.mines},t.minesLeft=0,t.status="game",t.cells.length=t.notRevealed=e.width*e.height;var a=t.cells.length;for(t.notRevealed=a,t.startingCell=0,t.cells=t.cells.fill().map((function(e,t){return{isRevealed:!1,isFlagged:!1,index:t}})).map((function(e){return e.value={isMine:!1,neighbours:0},e}));t.minesLeft<t.details.mines;){for(var n=void 0,i=0;0===i||t.cells[n].value.isMine;i++)if((n=i<1e3?Math.floor(Math.random()*a):1e3===i?0:n+1)>=a)throw new Error("Failed to shuffle mines. Too many retries!");t.minesLeft++,t.cells[n].value.isMine=!0,w(t,n).forEach((function(e){t.cells[e]&&t.cells[e].value.neighbours++}))}return t.viewableCells=function(e){if(t.details.width<=20&&t.details.height<=20)return t.cells;for(var a=[],n=e%t.details.width,i=Math.min(t.details.width,20),l=e;a.length<400&&l<t.cells.length;l++)a.push(t.cells[l]),l%t.details.width===n+i-1&&(l+=t.details.width-i);return a},t}function E(e,t){var a=function(){switch(t.type){case"chgDetails":return(e=b({width:t.width,height:t.height,mines:t.mines},e)).superhero=t.superhero,{v:Object(h.a)({},e)};case"cMenu":var a=e.cells[t.index];if(a.isRevealed)break;return a.isFlagged?e.minesLeft++:(0===e.minesLeft&&alert("you are using too many flags!"),e.minesLeft--),a.isFlagged=!a.isFlagged,t.type="",{v:Object(h.a)({},e)};case"click":var n=e.cells,i=e.cells[t.index];if("game"!==e.status)break;if(e.notRevealed,e.cells.length,i.isRevealed||i.isFlagged)break;if(i.value.isMine)return i.isRevealed=!0,e.status="Lose",{v:Object(h.a)({},e)};function l(t){n[t].isRevealed||(n[t].isRevealed=!0,e.notRevealed--)}if(0!==i.value.neighbours)l(t.index);else for(var r=function(t){var a=t.pop();if(n[a].isRevealed)return"continue";for(var i=a,r=a;0===n[i].value.neighbours&&f(e,i);i--);for(;0===n[r].value.neighbours&&p(e,r);r++);for(;i<=r;i++)l(i),0===n[i].value.neighbours&&w(e,i).forEach((function(e){n[e].isRevealed||t.push(e)}))},s=[t.index];s.length>0;)r(s);return e.notRevealed===e.details.mines&&(e.status="Win",n.forEach((function(e){e.isRevealed=!0,e.value.isMine&&(e.isFlagged=!0)}))),{v:Object(h.a)({},e)};case"chgStartingCell":return e.startingCell=t.index,{v:Object(h.a)({},e)}}}();return"object"===typeof a?a.v:e}a(11);var C=function(){var e=b({width:15,height:15,mines:25}),t=Object(n.useReducer)(E,e),a=Object(s.a)(t,2),l=a[0],r=a[1],h=Object(n.useState)(!1),d=Object(s.a)(h,2),g=d[0],v=d[1];return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},"Minesweeper!",i.a.createElement("input",{type:"checkbox",value:g,onChange:function(e){v(e.target.checked)}})),i.a.createElement(u,{board:l,onChange:function(e,t,a){r({type:"chgDetails",width:parseInt(e),height:parseInt(t),mines:parseInt(a)})}}),i.a.createElement(o,{board:l,superhero:g,onChange:function(e,t){r({type:e,index:t})}}),i.a.createElement(c,{board:l,onChange:function(e){r({type:"chgStartingCell",index:e})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.7e50559b.chunk.js.map